package de.sbuettner.vs.praktikum;

import org.apache.thrift.transport.TServerSocket;
import org.apache.thrift.transport.TServerTransport;
import org.eclipse.paho.client.mqttv3.MqttClient;
import org.eclipse.paho.client.mqttv3.MqttException;
import org.eclipse.paho.client.mqttv3.MqttMessage;
import org.eclipse.paho.client.mqttv3.MqttSecurityException;
import org.apache.thrift.server.TServer;
import org.apache.thrift.server.TServer.Args;
import org.apache.thrift.server.TSimpleServer;

public class ShopServiceServer{
	static MqttClient client;
	
	public static void StartsimpleServer(ShopService.Processor<ShopServiceHandler> processor) {
		try {
			   TServerTransport serverTransport = new TServerSocket(9006);
			   TServer server = new TSimpleServer(
			     new Args(serverTransport).processor(processor));

			   // Use this for a multithreaded server
			   // TServer server = new TThreadPoolServer(new
			   // TThreadPoolServer.Args(serverTransport).processor(processor));

			   System.out.println("Starting the simple server...");
			   server.serve();
			  } catch (Exception e) {
			   e.printStackTrace();
			  }
	}

	
	public static void main(String[] args) {
		  StartsimpleServer(new ShopService.Processor<ShopServiceHandler>(new ShopServiceHandler()));
		  try {
			client = new MqttClient("tcp://192.168.192.23", "ManufacturerID");
		} catch (MqttException e) {
			e.printStackTrace();
		}
		  
		
	}

}
